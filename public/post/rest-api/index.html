<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"}>
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff" />
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1b" />

    <meta name="description" content="REST API Guidelines ðŸ“œ">

    
        <title>REST API Guidelines ðŸ“œ | chasek blog</title>
    

    
    <style>
        :root {
          --background: #ffffff;
        }
        @media (prefers-color-scheme: dark) {
          :root {
            --background: #1b1b1b;
          }
        }
        html {
            background-color: var(--background);
        }
        body {
            background-color: var(--background);
        }
    </style>

    
    <link rel="stylesheet" type="text/css" href="/style.min.a9de976a7573ba1b8227e403bbfab145eef224a3b71a621553428985cf42623c.css" media="all">

    
    

  </head>

  <body>
        
        <nav>
          <ul class="menu">
            
                <li><a tabindex="-1" class="menu-link" href="/"><u>H</u>ome</a></li>
            
                <li><a tabindex="-1" class="menu-link" href="https://chasekillorin.com/tags"><u>T</u>ags</a></li>
            
          </ul>
        </nav>
        




<div id="single-header">
  <h1>
    REST API Guidelines ðŸ“œ
  </h1>
  <div id="single-meta">
    
    
        <span class="datesub">Aug 11, 2021</span>
      
<span id="tags">
  &nbsp;&nbsp;
   <span>
    <a href="http://localhost:1313/tags/rest/">#rest</a>
  </span>&nbsp;</span>


  </div>
</div>



<aside class="hidden lg:block toc " id="tableOfContentContainer">
  <nav id="TableOfContents">
  <ul>
    <li><a href="#1-resource-oriented-design">1. Resource-oriented design</a></li>
    <li><a href="#2-naming-and-standards">2. Naming and standards</a>
      <ul>
        <li><a href="#canonical-identifier">Canonical identifier</a></li>
        <li><a href="#time">Time</a></li>
        <li><a href="#durations">Durations</a></li>
        <li><a href="#intervals">Intervals</a></li>
      </ul>
    </li>
    <li><a href="#3-http-methods">3. HTTP Methods</a></li>
    <li><a href="#4-headers">4. Headers</a>
      <ul>
        <li><a href="#standard-request-headers">Standard request headers</a></li>
        <li><a href="#standard-response-headers">Standard response headers</a></li>
      </ul>
    </li>
    <li><a href="#5-status-codes">5. Status codes</a></li>
    <li><a href="#6-json-body">6. JSON body</a>
      <ul>
        <li><a href="#success">Success</a></li>
        <li><a href="#error">Error</a></li>
      </ul>
    </li>
    <li><a href="#7-common-patterns">7. Common patterns</a>
      <ul>
        <li><a href="#pagination">Pagination</a></li>
        <li><a href="#sorting">Sorting</a></li>
        <li><a href="#filtering">Filtering</a></li>
        <li><a href="#long-running-operations">Long Running Operations</a></li>
        <li><a href="#access-sub-collections">Access Sub-Collections</a></li>
        <li><a href="#etags">ETags</a></li>
        <li><a href="#throttling">Throttling</a></li>
      </ul>
    </li>
    <li><a href="#notes">Notes</a></li>
  </ul>
</nav>
</aside>



<main><p>This is a shortened merge of <a href="https://cloud.google.com/apis/design"  target="_blank" rel="noreferrer nofollow">Google&rsquo;s API design guide</a>

and <a href="https://github.com/microsoft/api-guidelines/blob/vNext/Guidelines.md"  target="_blank" rel="noreferrer nofollow">Microsoft REST API Guidelines</a>
.</p>
<p>To write OpenAPI schema <a href="https://swagger.io/docs/specification/basic-structure/"  target="_blank" rel="noreferrer nofollow">swagger</a>
 documentation is useful.
To quickly iterate on a design, <a href="https://semver.org/"  target="_blank" rel="noreferrer nofollow">semantic versioning</a>
 should be used.
To generate human-readable diff of different versions <a href="https://github.com/OpenAPITools/openapi-diff"  target="_blank" rel="noreferrer nofollow">openapi-diff</a>

can be useful.</p>
<h2 id="1-resource-oriented-design">1. Resource-oriented design</h2>
<p>In general URL paths should follow this scheme:</p>
<table>
  <thead>
      <tr>
          <th>API Service Name</th>
          <th>Collection ID</th>
          <th>Resource ID</th>
          <th>Collection ID</th>
          <th>Resource ID</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>//storage.googleapis.com</td>
          <td>/buckets</td>
          <td>/bucket-id</td>
          <td>/objects</td>
          <td>/object-id</td>
      </tr>
  </tbody>
</table>
<p>A storage service has a collection of <em>buckets</em>, where each bucket has a collection of <em>objects</em>.</p>
<p>Another example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">https://api.contoso.com/v1.0/people/7011042402/inbox
</span></span></span></code></pre></div><p>Resource names should be <strong>noun</strong> and not verb. Resource names should be <strong>plural</strong>.</p>
<h2 id="2-naming-and-standards">2. Naming and standards</h2>
<p>Microsoft mostly uses <em>camelCase</em>, Google mostly uses <em>snake_case</em> - this guide will be using <strong>camelCase</strong>.</p>
<ul>
<li>Acronyms should follow the casing conventions as though they were regular words (e.g. <code>Url</code>).</li>
<li>All identifiers including namespaces, entityTypes, entitySets, properties, actions, functions and enumeration values should use lowerCamelCase.</li>
<li>HTTP headers are the exception and should use standard HTTP convention of Capitalized-Hyphenated-Terms.</li>
<li>Full words should be preferred (e.g. <code>message</code> instead of <code>msg</code>).</li>
</ul>
<p>Common property names should be used where applicable:</p>
<table>
  <thead>
      <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>name</td>
          <td>string</td>
          <td>The name field should contain the relative resource name.</td>
      </tr>
      <tr>
          <td>parent</td>
          <td>string</td>
          <td>For resource definitions and List/Create requests, the parent field should contain the parent relative resource name.</td>
      </tr>
      <tr>
          <td>createTime</td>
          <td>Timestamp</td>
          <td>The creation timestamp of an entity.</td>
      </tr>
      <tr>
          <td>updateTime</td>
          <td>Timestamp</td>
          <td>The last update timestamp of an entity. Note: update_time is updated when create/patch/delete operation is performed.</td>
      </tr>
      <tr>
          <td>deleteTime</td>
          <td>Timestamp</td>
          <td>The deletion timestamp of an entity, only if it supports retention.</td>
      </tr>
      <tr>
          <td>expireTime</td>
          <td>Timestamp</td>
          <td>The expiration timestamp of an entity if it happens to expire.</td>
      </tr>
      <tr>
          <td>startTime</td>
          <td>Timestamp</td>
          <td>The timestamp marking the beginning of some time period.</td>
      </tr>
      <tr>
          <td>endTime</td>
          <td>Timestamp</td>
          <td>The timestamp marking the end of some time period or operation (regardless of its success).</td>
      </tr>
      <tr>
          <td>readTime</td>
          <td>Timestamp</td>
          <td>The timestamp at which a particular an entity should be read (if used in a request) or was read (if used in a response).</td>
      </tr>
      <tr>
          <td>timeZone</td>
          <td>string</td>
          <td>The time zone name. It should be an IANA TZ name, such as &ldquo;America/Los_Angeles&rdquo;. For more information, see <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones"  target="_blank" rel="noreferrer nofollow">Wikipedia</a>
.</td>
      </tr>
      <tr>
          <td>regionCode</td>
          <td>string</td>
          <td>The Unicode country/region code (CLDR) of a location, such as &ldquo;US&rdquo; and &ldquo;419&rdquo;. For more information, see <a href="http://www.unicode.org/reports/tr35/#unicode_region_subtag"  target="_blank" rel="noreferrer nofollow">unicode.org</a>
.</td>
      </tr>
      <tr>
          <td>languageCode</td>
          <td>string</td>
          <td>The BCP-47 language code, such as &ldquo;en-US&rdquo; or &ldquo;sr-Latn&rdquo;. For more information, see <a href="http://www.unicode.org/reports/tr35/#Unicode_locale_identifier"  target="_blank" rel="noreferrer nofollow">unicode.org</a>
.</td>
      </tr>
      <tr>
          <td>mimeType</td>
          <td>string</td>
          <td>An IANA published MIME type (also referred to as media type). For more information, see <a href="https://www.iana.org/assignments/media-types/media-types.xhtml"  target="_blank" rel="noreferrer nofollow">iana.org</a>
.</td>
      </tr>
      <tr>
          <td>displayName</td>
          <td>string</td>
          <td>The display name of an entity.</td>
      </tr>
      <tr>
          <td>title</td>
          <td>string</td>
          <td>The official name of an entity, such as company name. It should be treated as the formal version of display_name.</td>
      </tr>
      <tr>
          <td>description</td>
          <td>string</td>
          <td>One or more paragraphs of text description of an entity.</td>
      </tr>
      <tr>
          <td>filter</td>
          <td>string</td>
          <td>The standard filter parameter for List methods. See AIP-160.</td>
      </tr>
      <tr>
          <td>query</td>
          <td>string</td>
          <td>The same as filter if being applied to a search method (ie :search)</td>
      </tr>
      <tr>
          <td>pageToken</td>
          <td>string</td>
          <td>The pagination token in the List request.</td>
      </tr>
      <tr>
          <td>pageSize</td>
          <td>int32</td>
          <td>The pagination size in the List request.</td>
      </tr>
      <tr>
          <td>totalSize</td>
          <td>int32</td>
          <td>The total count of items in the list irrespective of pagination.</td>
      </tr>
      <tr>
          <td>nextPageToken</td>
          <td>string</td>
          <td>The next pagination token in the List response. It should be used as page_token for the following request. An empty value means no more result.</td>
      </tr>
      <tr>
          <td>orderBy</td>
          <td>string</td>
          <td>Specifies the result ordering for List requests.</td>
      </tr>
      <tr>
          <td>progressPercent</td>
          <td>int32</td>
          <td>Specifies the progress of an action in percentage (0-100). The value -1 means the progress is unknown.</td>
      </tr>
      <tr>
          <td>requestId</td>
          <td>string</td>
          <td>A unique string id used for detecting duplicated requests.</td>
      </tr>
      <tr>
          <td>validateOnly</td>
          <td>bool</td>
          <td>If true, it indicates that the given request should only be validated, not executed.</td>
      </tr>
      <tr>
          <td>id</td>
          <td>string</td>
          <td>See <a href="#canonical-identifier" >Canonical identifier</a>
 section.</td>
      </tr>
      <tr>
          <td>location</td>
          <td>string</td>
          <td>Opaque URL for some resource.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>string</td>
          <td>Arbitrary message.</td>
      </tr>
  </tbody>
</table>
<p>For resource fields that cannot be set by the clients, they must be documented as &ldquo;Output only&rdquo; fields.</p>
<h3 id="canonical-identifier">Canonical identifier</h3>
<p>In addition to friendly URLs, resources that can be moved or be renamed SHOULD expose a URL that contains
a unique stable identifier. It MAY be necessary to interact with the service to obtain a stable URL
from the friendly name for the resource, as in the case of the <code>/my</code> shortcut used by some services.</p>
<p>One option is to use <a href="https://github.com/ulid/spec"  target="_blank" rel="noreferrer nofollow">ULID</a>
.</p>
<h3 id="time">Time</h3>
<p>All time values are should be represented as RFC 3339 timestamps:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">2019-10-12T07:20:50.52Z      (UTC+0)
</span></span><span class="line"><span class="cl">2019-10-12T07:20:50.52+00:00 (UTC+0)
</span></span><span class="line"><span class="cl">2019-10-12T14:20:50.52+07:00 (UTC+7)
</span></span><span class="line"><span class="cl">2019-10-12T03:20:50.52-04:00 (UTC-4)
</span></span></code></pre></div><h3 id="durations">Durations</h3>
<p>Durations need to be serialized in conformance with ISO 8601 with the following format:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">P[n]Y[n]M[n]DT[n]H[n]M[n]S
</span></span></code></pre></div><p>Example (3 years, 6 months, 4 days, 12 hours, 30 minutes, and 5 seconds):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">P3Y6M4DT12H30M5S
</span></span></code></pre></div><h3 id="intervals">Intervals</h3>
<p>Intervals are defined as part of ISO 8601. It seems sufficient to support only the following formats:</p>
<ul>
<li>
<p>Start and end, such as</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">2007-03-01T13:00:00Z/2008-05-11T15:30:00Z
</span></span></code></pre></div></li>
<li>
<p>Start and duration, such as</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">2007-03-01T13:00:00Z/P1Y2M10DT2H30M
</span></span></code></pre></div></li>
</ul>
<h2 id="3-http-methods">3. HTTP Methods</h2>
<table>
  <thead>
      <tr>
          <th>Method</th>
          <th>HTTP Request Body</th>
          <th>HTTP Response Body</th>
          <th>Is Idempotent</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>GET <collection URL></td>
          <td>N/A</td>
          <td>Resource list</td>
          <td>True</td>
          <td>Return the specified resource.</td>
      </tr>
      <tr>
          <td>GET <resource URL></td>
          <td>N/A</td>
          <td>Resource</td>
          <td>True</td>
          <td>Return a list of resources.</td>
      </tr>
      <tr>
          <td>POST <collection URL></td>
          <td>Resource</td>
          <td>Resource</td>
          <td>False</td>
          <td>Create a new object, or submit a command.</td>
      </tr>
      <tr>
          <td>PUT <resource URL></td>
          <td>Resource</td>
          <td>Resource</td>
          <td>True</td>
          <td>Replace an object.</td>
      </tr>
      <tr>
          <td>PATCH <resource URL></td>
          <td>Resource</td>
          <td>Resource</td>
          <td>False</td>
          <td>Apply a partial update to an object.</td>
      </tr>
      <tr>
          <td>DELETE <resource URL></td>
          <td>N/A</td>
          <td>&hellip;</td>
          <td>True</td>
          <td>Delete an object.</td>
      </tr>
      <tr>
          <td>HEAD</td>
          <td>N/A</td>
          <td>&hellip;</td>
          <td>True</td>
          <td>Return metadata of an object for a GET response.</td>
      </tr>
  </tbody>
</table>
<h2 id="4-headers">4. Headers</h2>
<p>A good reference for standard headers can be found on <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers"  target="_blank" rel="noreferrer nofollow">MDN</a>
.
The most common are listed below.</p>
<h3 id="standard-request-headers">Standard request headers</h3>
<table>
  <thead>
      <tr>
          <th>Header</th>
          <th>Description</th>
          <th>Examples</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Authorization</td>
          <td>Authorization header for the request.</td>
          <td><code>Authorization: Bearer &lt;token&gt;</code></td>
      </tr>
      <tr>
          <td>Date</td>
          <td>Timestamp of the request in client time.</td>
          <td><code>Date: Wed, 21 Oct 2015 07:28:00 GMT</code><sup id="date-header"><a href="#date-header-ref" >[1]</a>
</sup></td>
      </tr>
      <tr>
          <td>Accept</td>
          <td>The requested content type for the response.</td>
          <td><code>Accept: application/json</code></td>
      </tr>
      <tr>
          <td>Content-Type</td>
          <td>Media type of the resource.</td>
          <td><code>Content-Type: text/html; charset=UTF-8</code>, <code>Content-Type: multipart/form-data; boundary=something</code></td>
      </tr>
      <tr>
          <td>If-None-Match</td>
          <td>See <a href="#etags" >ETags</a>
 section</td>
          <td><code>If-None-Match: &quot;686897696a7c876b7e&quot;</code></td>
      </tr>
  </tbody>
</table>
<h3 id="standard-response-headers">Standard response headers</h3>
<table>
  <thead>
      <tr>
          <th>Response Header</th>
          <th>Description</th>
          <th>Examples</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Date</td>
          <td>Timestamp of the response in server time.</td>
          <td><code>Date: Wed, 21 Oct 2015 07:28:00 GMT</code></td>
      </tr>
      <tr>
          <td>Content-Type</td>
          <td>Media type of the resource.</td>
          <td><code>Content-Type: application/json</code></td>
      </tr>
      <tr>
          <td>Content-Encoding</td>
          <td>Lists any encodings that have been applied to the representation, and in what order.</td>
          <td><code>Content-Encoding: deflate, gzip</code></td>
      </tr>
      <tr>
          <td>ETag</td>
          <td>See <a href="#etags" >ETags</a>
 section.</td>
          <td><code>ETag: &quot;33a64df551425fcc55e4d42a148795d9f25f89d4&quot;</code></td>
      </tr>
  </tbody>
</table>
<h2 id="5-status-codes">5. Status codes</h2>
<p>Full list of HTTP status codes can be found on <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status"  target="_blank" rel="noreferrer nofollow">MDN</a>
.
The most common are listed below.</p>
<table>
  <thead>
      <tr>
          <th>Code</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>200 OK</td>
          <td>The request succeeded.</td>
      </tr>
      <tr>
          <td>201 Created</td>
          <td>The request succeeded, and a new resource was created as a result.</td>
      </tr>
      <tr>
          <td>202 Accepted</td>
          <td>The request was accepted for processing, but the processing has not been completed.</td>
      </tr>
      <tr>
          <td>304 Not Modified</td>
          <td>Indicates that the resource has not been modified (see Etags section).</td>
      </tr>
      <tr>
          <td>400 Bad Request</td>
          <td>The server cannot or will not process the request due to something that is perceived to be a client error</td>
      </tr>
      <tr>
          <td>401 Unauthorized</td>
          <td>The request requires user authentication.</td>
      </tr>
      <tr>
          <td>403 Forbidden</td>
          <td>The client does not have access rights to the content.</td>
      </tr>
      <tr>
          <td>404 Not Found</td>
          <td>A specified resource is not found.</td>
      </tr>
      <tr>
          <td>405 Method Not Allowed</td>
          <td>The request method is known by the server but is not supported by the target resource.</td>
      </tr>
      <tr>
          <td>409 Conflict</td>
          <td>This response is sent when a request conflicts with the current state of the server.</td>
      </tr>
      <tr>
          <td>429 Too Many Requests</td>
          <td>The user has sent too many requests in a given amount of time (&ldquo;rate limiting&rdquo;).</td>
      </tr>
      <tr>
          <td>500 Internal Server Error</td>
          <td>The server has encountered a situation it does not know how to handle.</td>
      </tr>
      <tr>
          <td>502 Bad Gateway</td>
          <td>This error response means that the server, while working as a gateway to get a response needed to handle the request, got an invalid response.</td>
      </tr>
      <tr>
          <td>503 Service Unavailable</td>
          <td>The server is not ready to handle the request.</td>
      </tr>
  </tbody>
</table>
<h2 id="6-json-body">6. JSON body</h2>
<h3 id="success">Success</h3>
<p>To separate actual data from metadata (lake pagination, etc), the JSON body
of response should put data object under <code>value</code> key.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;value&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="nt">&#34;street&#34;</span><span class="p">:</span> <span class="s2">&#34;1st Avenue&#34;</span><span class="p">,</span> <span class="nt">&#34;city&#34;</span><span class="p">:</span> <span class="s2">&#34;Seattle&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="nt">&#34;street&#34;</span><span class="p">:</span> <span class="s2">&#34;124th Ave NE&#34;</span><span class="p">,</span> <span class="nt">&#34;city&#34;</span><span class="p">:</span> <span class="s2">&#34;Redmond&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="error">Error</h3>
<p>Error object should be under <code>error</code> key. Response body should use the following structure:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;error&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;BadArgument&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;message&#34;</span><span class="p">:</span> <span class="s2">&#34;Multiple errors in ContactInfo data&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;target&#34;</span><span class="p">:</span> <span class="s2">&#34;ContactInfo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;details&#34;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;NullValue&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;target&#34;</span><span class="p">:</span> <span class="s2">&#34;PhoneNumber&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;message&#34;</span><span class="p">:</span> <span class="s2">&#34;Phone number must not be null&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;NullValue&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;target&#34;</span><span class="p">:</span> <span class="s2">&#34;LastName&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;message&#34;</span><span class="p">:</span> <span class="s2">&#34;Last name must not be null&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;code&#34;</span><span class="p">:</span> <span class="s2">&#34;MalformedValue&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;target&#34;</span><span class="p">:</span> <span class="s2">&#34;Address&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nt">&#34;message&#34;</span><span class="p">:</span> <span class="s2">&#34;Address is not valid&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><code>code</code>, <code>message</code> and <code>details</code> (can be empty array) are required fields.</p>
<p>Note, that <code>message</code> fields are not to be used to display to client. Instead client and server
should design a set of error codes specified by <code>code</code> field (that does not nececcerily match
HTTP status codes).</p>
<h2 id="7-common-patterns">7. Common patterns</h2>
<h3 id="pagination">Pagination</h3>
<p>All APIs that return lists should support pagination. <strong>Client-driven paging</strong> seems to be the most popular.</p>
<p>Clients MAY use <code>$top</code> and <code>$skip</code> query parameters to specify a number of results to return and an offset into the collection.
When both <code>$top</code> and <code>$skip</code> are given by a client, the server SHOULD first apply <code>$skip</code> and then <code>$top</code> on the collection.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">GET http://api.contoso.com/v1.0/people?$top=5&amp;$skip=2
</span></span></span></code></pre></div><p><em>For server-driven paging, <a href="https://cloud.google.com/apis/design/design_patterns"  target="_blank" rel="noreferrer nofollow">Google&rsquo;s guide</a>
 is useful.</em></p>
<h3 id="sorting">Sorting</h3>
<p>Sorting is defined by a query parameter <code>$orderBy</code>.</p>
<p>The string value should follow SQL syntax: comma separated list of fields.
For example: <code>foo,bar</code>. The default sorting order is ascending.
To specify descending order for a field, a suffix <code>desc</code> should be appended to the field name.
For example: <code>foo desc,bar</code>.</p>
<h3 id="filtering">Filtering</h3>
<p><code>$filter</code> query parameter is evaluated for each resource in the collection, and only items where the expression evaluates to true are included in the response.</p>
<p><strong>Example 1</strong>: return all Products whose Price is less than $10.00:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">GET https://api.contoso.com/v1.0/products?$filter=price lt 10.00
</span></span></span></code></pre></div><p><strong>Example 2</strong>: all products with the name &lsquo;Milk&rsquo; that also have a price less than 2.55:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">GET https://api.contoso.com/v1.0/products?$filter=name eq &#39;Milk&#39; and price lt 2.55
</span></span></span></code></pre></div><p>The value of the <code>$filter</code> option is a Boolean expression.</p>
<p>Microsoft lists the set of operations filter should support:</p>
<table>
  <thead>
      <tr>
          <th>Operator</th>
          <th>Description</th>
          <th>Example</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Comparison Operators</td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>eq</td>
          <td>Equal</td>
          <td>city eq &lsquo;Redmond&rsquo;</td>
      </tr>
      <tr>
          <td>ne</td>
          <td>Not equal</td>
          <td>city ne &lsquo;London&rsquo;</td>
      </tr>
      <tr>
          <td>gt</td>
          <td>Greater than</td>
          <td>price gt 20</td>
      </tr>
      <tr>
          <td>ge</td>
          <td>Greater than or equal</td>
          <td>price ge 10</td>
      </tr>
      <tr>
          <td>lt</td>
          <td>Less than</td>
          <td>price lt 20</td>
      </tr>
      <tr>
          <td>le</td>
          <td>Less than or equal</td>
          <td>price le 100</td>
      </tr>
      <tr>
          <td>Logical Operators</td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>and</td>
          <td>Logical and</td>
          <td>price le 200 and price gt 3.5</td>
      </tr>
      <tr>
          <td>or</td>
          <td>Logical or</td>
          <td>price le 3.5 or price gt 200</td>
      </tr>
      <tr>
          <td>not</td>
          <td>Logical negation</td>
          <td>not price le 3.5</td>
      </tr>
      <tr>
          <td>Grouping Operators</td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>()</td>
          <td>Precedence grouping</td>
          <td>(priority eq 1 or city eq &lsquo;Redmond&rsquo;) and price gt 100</td>
      </tr>
  </tbody>
</table>
<p>For more examples and operator precedence look
at <a href="https://github.com/microsoft/api-guidelines/blob/vNext/Guidelines.md#97-filtering"  target="_blank" rel="noreferrer nofollow">Microsoft&rsquo;s guide</a>
.</p>
<p><strong>When a filter is performed on a collection and the result set is empty you must respond with a valid response body and a 200 response code.</strong></p>
<h3 id="long-running-operations">Long Running Operations</h3>
<p>Services should be as responsive as possible, so as not to block callers. As a rule of thumb any API call that is expected to take longer than 0.5 seconds in the 99th percentile, should consider using the following Long-running Operations pattern for those calls.</p>
<p>The operation resource must be returned directly as the response message and
any immediate consequence of the operation should be reflected in the API.
For example, when creating a resource, that resource should appear in GET method
though the resource should indicate that it is not ready for use.
When the operation is complete, the <code>value</code> field should
contain the value that would have been returned directly,
if the method was not long running.</p>
<h3 id="access-sub-collections">Access Sub-Collections</h3>
<p>Sometimes, an API needs to let a client search across sub- collections. For example, the Library API has a collection of shelves, and each shelf has a collection of books, and a client wants to search for a book across all shelves.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">GET https://library.googleapis.com/v1/shelves/-/books?filter=xxx
</span></span></span><span class="line"><span class="cl"><span class="err">GET https://library.googleapis.com/v1/shelves/-/books/{id}
</span></span></span></code></pre></div><h3 id="etags">ETags</h3>
<p>In typical usage, when a URL is retrieved, the Web server will return the resource&rsquo;s current representation along with its corresponding ETag value, which is placed in an HTTP response header &ldquo;ETag&rdquo; field:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">ETag: &#34;686897696a7c876b7e&#34;
</span></span></code></pre></div><p>The client may then decide to cache the representation, along with its ETag.
Later, if the client wants to retrieve the same URL resource again, it will first determine whether the
locally cached version of the URL has expired (through the Cache-Control and the Expire headers).
If the URL has not expired, it will retrieve the locally cached resource.
If it is determined that the URL has expired (is stale), the client will send a request
to the server that includes its previously saved copy of the ETag in the &ldquo;If-None-Match&rdquo; field.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">If-None-Match: &#34;686897696a7c876b7e&#34;
</span></span></code></pre></div><p>On this subsequent request, the server may now compare the client&rsquo;s ETag with the ETag for the current version of the resource.
If the ETag values match, meaning that the resource has not changed, the server may send back a very short response
with a HTTP 304 Not Modified status. The 304 status tells the client that its cached version is still good
and that it should use that.</p>
<h3 id="throttling">Throttling</h3>
<p>Services should be as responsive as possible, so as not to block callers.
As a rule of thumb any API call that is expected to take longer than 0.5 seconds in the 99th percentile,
should consider using the Long-running Operations pattern for those calls.</p>
<p>HTTP specifies two return codes for these scenarios: &lsquo;429 Too Many Requests&rsquo; and &lsquo;503 Service Unavailable&rsquo;.
Services should use 429 for cases where clients are making too many calls and can fix the situation by
changing their call pattern. Services should respond with 503 in cases where general load or other problems
outside the control of the individual callers is responsible for the service becoming slow.</p>
<p>To avoid cascading failures, <a href="https://docs.microsoft.com/en-us/azure/architecture/patterns/circuit-breaker"  target="_blank" rel="noreferrer nofollow">Circuit Breaker pattern</a>

can be used (<a href="https://github.com/sony/gobreaker"  target="_blank" rel="noreferrer nofollow">Go implementation</a>
).</p>
<h2 id="notes">Notes</h2>
<ul>
<li><small id="date-header-ref"><a href="#date-header" >[1]</a>
 The time format in <code>Date</code> header <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Date"  target="_blank" rel="noreferrer nofollow">is important</a>
.
</small></li>
</ul>
</main>



<br>

<footer>

<script defer>
  document.addEventListener("keydown", function (e) {
    if (document.activeElement.isContentEditable) {
      return false;
    }
    if (document.activeElement.tagName == "INPUT") {
      return false;
    }
    if (e.altKey || e.ctrlKey || e.shiftKey) {
      return false;
    }
    var key = e.key;
    if (key === "h") {
      e.preventDefault();
      e.stopPropagation();
      window.location.href = "/";
    } else if (key === "t") {
      e.preventDefault();
      e.stopPropagation();
      window.location.href = `https://${location.hostname}/tags`;
    } else if (key === "i") {
      e.preventDefault();
      e.stopPropagation();
      const inputs = document.querySelectorAll("input");
      for (let i = 0; i < inputs.length; i++) {
        if (inputs[i].offsetParent !== null) {
          inputs[i].selectionStart = inputs[i].selectionEnd =
            inputs[i].value.length;
          inputs[i].focus();
          break;
        }
      }
    }
    return false;
  });
</script>


<script defer>
  function throttle(fn, wait) {
    var time = Date.now();
    return function () {
      var now = Date.now();
      if (time + wait - now < 0) {
        fn();
        time = now;
      }
    };
  }

  function scrollHandler() {
    const anchors = Array.from(document.querySelectorAll("body h2, body h3"));

    function scrollCallback() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop;

      
      for (var i = 0; i < anchors.length; i++) {
        var anchorId = anchors[i].getAttribute("id");
        var link = document.querySelector(
          'nav ul li a[href="#' + anchorId + '"]',
        );
        if (link) {
          link.classList.remove("active-toc");
        }
      }

      
      for (var i = anchors.length - 1; i >= 0; i--) {
        var offsetTop = anchors[i].offsetTop;
        if (scrollTop > offsetTop - 75) {
          var anchorId = anchors[i].getAttribute("id");
          var link = document.querySelector(
            'nav ul li a[href="#' + anchorId + '"]',
          );
          if (link) {
            link.classList.add("active-toc");
            break;
          }
        }
      }
    }

    window.addEventListener("scroll", throttle(scrollCallback, 200));
  }
  setTimeout(scrollHandler, 100);
</script>

<script defer>
  function addCopyButtonToCodeBlocks() {
    
    
    const codeBlocks = document.querySelectorAll(
      'code[class^="language-"]:not(.output):not([class*="language-console"])',
    );

    codeBlocks.forEach((codeBlock) => {
      const copyButton = document.createElement("button");
      copyButton.classList.add("copy-code-button");
      copyButton.innerHTML = "copy";

      
      copyButton.addEventListener("click", () => {
        
        const elements = codeBlock.querySelectorAll(".cl");
        let codeToCopy = "";
        elements.forEach((element) => {
          codeToCopy += element.innerText;
        });
        navigator.clipboard.writeText(codeToCopy);

        
        copyButton.innerHTML = "copied!";
        setTimeout(() => {
          copyButton.innerHTML = "copy";
        }, 1500);
      });

      
      codeBlock.parentNode.before(copyButton);
    });
  }
  setTimeout(function () {
    addCopyButtonToCodeBlocks();
  }, 100);
</script>

<script>
window.store = {
    
    "http:\/\/localhost:1313\/post\/": {
        "title": "Posts",
        "tags": [],
        "content": "", 
        "url": "http:\/\/localhost:1313\/post\/"
    },
    
    "http:\/\/localhost:1313\/": {
        "title": "chasek blog",
        "tags": [],
        "content": "", 
        "url": "http:\/\/localhost:1313\/"
    },
    
    "http:\/\/localhost:1313\/tags\/rest\/": {
        "title": "Rest",
        "tags": [],
        "content": "", 
        "url": "http:\/\/localhost:1313\/tags\/rest\/"
    },
    
    "http:\/\/localhost:1313\/post\/rest-api\/": {
        "title": "REST API Guidelines ðŸ“œ",
        "tags": ["rest",],
        "content": "This is a shortened merge of Google\u0026rsquo;s API design guide and Microsoft REST API Guidelines .\nTo write OpenAPI schema swagger documentation is useful. To quickly iterate on a design, semantic versioning should be used. To generate human-readable diff of different versions openapi-diff can be useful.\n1. Resource-oriented design In general URL paths should follow this scheme:\nAPI Service Name Collection ID Resource ID Collection ID Resource ID //storage.googleapis.com /buckets /bucket-id /objects /object-id A storage service has a collection of buckets, where each bucket has a collection of objects.\nAnother example:\nhttps://api.contoso.com/v1.0/people/7011042402/inbox Resource names should be noun and not verb. Resource names should be plural.\n2. Naming and standards Microsoft mostly uses camelCase, Google mostly uses snake_case - this guide will be using camelCase.\nAcronyms should follow the casing conventions as though they were regular words (e.g. Url). All identifiers including namespaces, entityTypes, entitySets, properties, actions, functions and enumeration values should use lowerCamelCase. HTTP headers are the exception and should use standard HTTP convention of Capitalized-Hyphenated-Terms. Full words should be preferred (e.g. message instead of msg). Common property names should be used where applicable:\nName Type Description name string The name field should contain the relative resource name. parent string For resource definitions and List/Create requests, the parent field should contain the parent relative resource name. createTime Timestamp The creation timestamp of an entity. updateTime Timestamp The last update timestamp of an entity. Note: update_time is updated when create/patch/delete operation is performed. deleteTime Timestamp The deletion timestamp of an entity, only if it supports retention. expireTime Timestamp The expiration timestamp of an entity if it happens to expire. startTime Timestamp The timestamp marking the beginning of some time period. endTime Timestamp The timestamp marking the end of some time period or operation (regardless of its success). readTime Timestamp The timestamp at which a particular an entity should be read (if used in a request) or was read (if used in a response). timeZone string The time zone name. It should be an IANA TZ name, such as \u0026ldquo;America/Los_Angeles\u0026rdquo;. For more information, see Wikipedia . regionCode string The Unicode country/region code (CLDR) of a location, such as \u0026ldquo;US\u0026rdquo; and \u0026ldquo;419\u0026rdquo;. For more information, see unicode.org . languageCode string The BCP-47 language code, such as \u0026ldquo;en-US\u0026rdquo; or \u0026ldquo;sr-Latn\u0026rdquo;. For more information, see unicode.org . mimeType string An IANA published MIME type (also referred to as media type). For more information, see iana.org . displayName string The display name of an entity. title string The official name of an entity, such as company name. It should be treated as the formal version of display_name. description string One or more paragraphs of text description of an entity. filter string The standard filter parameter for List methods. See AIP-160. query string The same as filter if being applied to a search method (ie :search) pageToken string The pagination token in the List request. pageSize int32 The pagination size in the List request. totalSize int32 The total count of items in the list irrespective of pagination. nextPageToken string The next pagination token in the List response. It should be used as page_token for the following request. An empty value means no more result. orderBy string Specifies the result ordering for List requests. progressPercent int32 Specifies the progress of an action in percentage (0-100). The value -1 means the progress is unknown. requestId string A unique string id used for detecting duplicated requests. validateOnly bool If true, it indicates that the given request should only be validated, not executed. id string See Canonical identifier section. location string Opaque URL for some resource. message string Arbitrary message. For resource fields that cannot be set by the clients, they must be documented as \u0026ldquo;Output only\u0026rdquo; fields.\nCanonical identifier In addition to friendly URLs, resources that can be moved or be renamed SHOULD expose a URL that contains a unique stable identifier. It MAY be necessary to interact with the service to obtain a stable URL from the friendly name for the resource, as in the case of the /my shortcut used by some services.\nOne option is to use ULID .\nTime All time values are should be represented as RFC 3339 timestamps:\n2019-10-12T07:20:50.52Z (UTC+0) 2019-10-12T07:20:50.52+00:00 (UTC+0) 2019-10-12T14:20:50.52+07:00 (UTC+7) 2019-10-12T03:20:50.52-04:00 (UTC-4) Durations Durations need to be serialized in conformance with ISO 8601 with the following format:\nP[n]Y[n]M[n]DT[n]H[n]M[n]S Example (3 years, 6 months, 4 days, 12 hours, 30 minutes, and 5 seconds):\nP3Y6M4DT12H30M5S Intervals Intervals are defined as part of ISO 8601. It seems sufficient to support only the following formats:\nStart and end, such as\n2007-03-01T13:00:00Z/2008-05-11T15:30:00Z Start and duration, such as\n2007-03-01T13:00:00Z/P1Y2M10DT2H30M 3. HTTP Methods Method HTTP Request Body HTTP Response Body Is Idempotent Description GET N/A Resource list True Return the specified resource. GET N/A Resource True Return a list of resources. POST Resource Resource False Create a new object, or submit a command. PUT Resource Resource True Replace an object. PATCH Resource Resource False Apply a partial update to an object. DELETE N/A \u0026hellip; True Delete an object. HEAD N/A \u0026hellip; True Return metadata of an object for a GET response. 4. Headers A good reference for standard headers can be found on MDN . The most common are listed below.\nStandard request headers Header Description Examples Authorization Authorization header for the request. Authorization: Bearer \u0026lt;token\u0026gt; Date Timestamp of the request in client time. Date: Wed, 21 Oct 2015 07:28:00 GMT[1] Accept The requested content type for the response. Accept: application/json Content-Type Media type of the resource. Content-Type: text/html; charset=UTF-8, Content-Type: multipart/form-data; boundary=something If-None-Match See ETags section If-None-Match: \u0026quot;686897696a7c876b7e\u0026quot; Standard response headers Response Header Description Examples Date Timestamp of the response in server time. Date: Wed, 21 Oct 2015 07:28:00 GMT Content-Type Media type of the resource. Content-Type: application/json Content-Encoding Lists any encodings that have been applied to the representation, and in what order. Content-Encoding: deflate, gzip ETag See ETags section. ETag: \u0026quot;33a64df551425fcc55e4d42a148795d9f25f89d4\u0026quot; 5. Status codes Full list of HTTP status codes can be found on MDN . The most common are listed below.\nCode Description 200 OK The request succeeded. 201 Created The request succeeded, and a new resource was created as a result. 202 Accepted The request was accepted for processing, but the processing has not been completed. 304 Not Modified Indicates that the resource has not been modified (see Etags section). 400 Bad Request The server cannot or will not process the request due to something that is perceived to be a client error 401 Unauthorized The request requires user authentication. 403 Forbidden The client does not have access rights to the content. 404 Not Found A specified resource is not found. 405 Method Not Allowed The request method is known by the server but is not supported by the target resource. 409 Conflict This response is sent when a request conflicts with the current state of the server. 429 Too Many Requests The user has sent too many requests in a given amount of time (\u0026ldquo;rate limiting\u0026rdquo;). 500 Internal Server Error The server has encountered a situation it does not know how to handle. 502 Bad Gateway This error response means that the server, while working as a gateway to get a response needed to handle the request, got an invalid response. 503 Service Unavailable The server is not ready to handle the request. 6. JSON body Success To separate actual data from metadata (lake pagination, etc), the JSON body of response should put data object under value key.\n{ \u0026#34;value\u0026#34;: [ { \u0026#34;street\u0026#34;: \u0026#34;1st Avenue\u0026#34;, \u0026#34;city\u0026#34;: \u0026#34;Seattle\u0026#34; }, { \u0026#34;street\u0026#34;: \u0026#34;124th Ave NE\u0026#34;, \u0026#34;city\u0026#34;: \u0026#34;Redmond\u0026#34; } ] } Error Error object should be under error key. Response body should use the following structure:\n{ \u0026#34;error\u0026#34;: { \u0026#34;code\u0026#34;: \u0026#34;BadArgument\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Multiple errors in ContactInfo data\u0026#34;, \u0026#34;target\u0026#34;: \u0026#34;ContactInfo\u0026#34;, \u0026#34;details\u0026#34;: [ { \u0026#34;code\u0026#34;: \u0026#34;NullValue\u0026#34;, \u0026#34;target\u0026#34;: \u0026#34;PhoneNumber\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Phone number must not be null\u0026#34; }, { \u0026#34;code\u0026#34;: \u0026#34;NullValue\u0026#34;, \u0026#34;target\u0026#34;: \u0026#34;LastName\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Last name must not be null\u0026#34; }, { \u0026#34;code\u0026#34;: \u0026#34;MalformedValue\u0026#34;, \u0026#34;target\u0026#34;: \u0026#34;Address\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Address is not valid\u0026#34; } ] } } code, message and details (can be empty array) are required fields.\nNote, that message fields are not to be used to display to client. Instead client and server should design a set of error codes specified by code field (that does not nececcerily match HTTP status codes).\n7. Common patterns Pagination All APIs that return lists should support pagination. Client-driven paging seems to be the most popular.\nClients MAY use $top and $skip query parameters to specify a number of results to return and an offset into the collection. When both $top and $skip are given by a client, the server SHOULD first apply $skip and then $top on the collection.\nGET http://api.contoso.com/v1.0/people?$top=5\u0026amp;$skip=2 For server-driven paging, Google\u0026rsquo;s guide is useful.\nSorting Sorting is defined by a query parameter $orderBy.\nThe string value should follow SQL syntax: comma separated list of fields. For example: foo,bar. The default sorting order is ascending. To specify descending order for a field, a suffix desc should be appended to the field name. For example: foo desc,bar.\nFiltering $filter query parameter is evaluated for each resource in the collection, and only items where the expression evaluates to true are included in the response.\nExample 1: return all Products whose Price is less than $10.00:\nGET https://api.contoso.com/v1.0/products?$filter=price lt 10.00 Example 2: all products with the name \u0026lsquo;Milk\u0026rsquo; that also have a price less than 2.55:\nGET https://api.contoso.com/v1.0/products?$filter=name eq \u0026#39;Milk\u0026#39; and price lt 2.55 The value of the $filter option is a Boolean expression.\nMicrosoft lists the set of operations filter should support:\nOperator Description Example Comparison Operators eq Equal city eq \u0026lsquo;Redmond\u0026rsquo; ne Not equal city ne \u0026lsquo;London\u0026rsquo; gt Greater than price gt 20 ge Greater than or equal price ge 10 lt Less than price lt 20 le Less than or equal price le 100 Logical Operators and Logical and price le 200 and price gt 3.5 or Logical or price le 3.5 or price gt 200 not Logical negation not price le 3.5 Grouping Operators () Precedence grouping (priority eq 1 or city eq \u0026lsquo;Redmond\u0026rsquo;) and price gt 100 For more examples and operator precedence look at Microsoft\u0026rsquo;s guide .\nWhen a filter is performed on a collection and the result set is empty you must respond with a valid response body and a 200 response code.\nLong Running Operations Services should be as responsive as possible, so as not to block callers. As a rule of thumb any API call that is expected to take longer than 0.5 seconds in the 99th percentile, should consider using the following Long-running Operations pattern for those calls.\nThe operation resource must be returned directly as the response message and any immediate consequence of the operation should be reflected in the API. For example, when creating a resource, that resource should appear in GET method though the resource should indicate that it is not ready for use. When the operation is complete, the value field should contain the value that would have been returned directly, if the method was not long running.\nAccess Sub-Collections Sometimes, an API needs to let a client search across sub- collections. For example, the Library API has a collection of shelves, and each shelf has a collection of books, and a client wants to search for a book across all shelves.\nGET https://library.googleapis.com/v1/shelves/-/books?filter=xxx GET https://library.googleapis.com/v1/shelves/-/books/{id} ETags In typical usage, when a URL is retrieved, the Web server will return the resource\u0026rsquo;s current representation along with its corresponding ETag value, which is placed in an HTTP response header \u0026ldquo;ETag\u0026rdquo; field:\nETag: \u0026#34;686897696a7c876b7e\u0026#34; The client may then decide to cache the representation, along with its ETag. Later, if the client wants to retrieve the same URL resource again, it will first determine whether the locally cached version of the URL has expired (through the Cache-Control and the Expire headers). If the URL has not expired, it will retrieve the locally cached resource. If it is determined that the URL has expired (is stale), the client will send a request to the server that includes its previously saved copy of the ETag in the \u0026ldquo;If-None-Match\u0026rdquo; field.\nIf-None-Match: \u0026#34;686897696a7c876b7e\u0026#34; On this subsequent request, the server may now compare the client\u0026rsquo;s ETag with the ETag for the current version of the resource. If the ETag values match, meaning that the resource has not changed, the server may send back a very short response with a HTTP 304 Not Modified status. The 304 status tells the client that its cached version is still good and that it should use that.\nThrottling Services should be as responsive as possible, so as not to block callers. As a rule of thumb any API call that is expected to take longer than 0.5 seconds in the 99th percentile, should consider using the Long-running Operations pattern for those calls.\nHTTP specifies two return codes for these scenarios: \u0026lsquo;429 Too Many Requests\u0026rsquo; and \u0026lsquo;503 Service Unavailable\u0026rsquo;. Services should use 429 for cases where clients are making too many calls and can fix the situation by changing their call pattern. Services should respond with 503 in cases where general load or other problems outside the control of the individual callers is responsible for the service becoming slow.\nTo avoid cascading failures, Circuit Breaker pattern can be used (Go implementation ).\nNotes [1] The time format in Date header is important . ", 
        "url": "http:\/\/localhost:1313\/post\/rest-api\/"
    },
    
    "http:\/\/localhost:1313\/tags\/": {
        "title": "Tags",
        "tags": [],
        "content": "", 
        "url": "http:\/\/localhost:1313\/tags\/"
    },
    
    "http:\/\/localhost:1313\/tags\/hugo\/": {
        "title": "Hugo",
        "tags": [],
        "content": "", 
        "url": "http:\/\/localhost:1313\/tags\/hugo\/"
    },
    
    "http:\/\/localhost:1313\/post\/hugo-dead-simple\/": {
        "title": "Hugo dead simple theme",
        "tags": ["hugo",],
        "content": "Simple hugo theme to be dead easy on the reader.\nInstallation Initialize go module\nhugo mod init \u0026lt;module_path\u0026gt; Add theme to your config.yml\nmodule: imports: - path: github.com/barklan/hugo-dead-simple Fetch theme\nhugo mod get -u Configuration Site parameters This site\u0026rsquo;s config can be found here .\nSection parameters 1--- 2title: \u0026#34;Section title\u0026#34; 3weight: 1 4nodate: false # display date next to post title 5--- Page parameters 1--- 2title: \u0026#34;Post/Page title\u0026#34; 3subtitle: \u0026#34;...example subtitle\u0026#34; 4date: \u0026#34;2023-08-11\u0026#34; 5toc: true # table of contents (only h2 and h3 added to toc) 6bold: true # display post title in bold in posts list 7categories: 8 - ... 9tags: 10 - ... 11next: true # show link to next post in footer 12nomenu: true # hide site menu 13notitle: true # hide title 14--- Deployment Generate and add favicons to /static\nDeploy your site to Netlify with this netlify.toml\n1[build] 2publish = \u0026#34;public\u0026#34; 3command = \u0026#34;hugo --gc --minify\u0026#34; 4 5[context.production] 6environment = { HUGO_VERSION = \u0026#34;0.144.0\u0026#34; } Post features Hugo shortcodes\nIn all examples youâ€™ll need to adjust code so the % or \u0026lt; are touching the { like this: {%.\nFootnotes Here\u0026#39;s a sentence with a footnote.[^1] [^1]: This is unnamed footnote. Here\u0026rsquo;s a sentence with a footnote.1\nMark \u0026lt;mark\u0026gt;Marked text\u0026lt;/mark\u0026gt; Marked text\nBoxes {{\u0026lt; box info \u0026gt;}} **This is a bold line** Hello there, and have a nice day {{\u0026lt; /box \u0026gt;}} info, tip, warning, important\nThis is a bold line\nHello there, and have a nice day\nHello there, and have a nice day\nHello there, and have a nice day\nHello there, and have a nice day\nCollapsible \u0026lt;details\u0026gt; \u0026lt;summary\u0026gt;Collapsible\u0026lt;/summary\u0026gt; ![rose](./pinkrose.avif) \u0026lt;/details\u0026gt; Collapsible some code Tables Use table generator .\nCode Code blocks support usual Hugo highlighting features. Additionally \u0026ldquo;copy\u0026rdquo; button is added to each code block automatically.\n```go {linenos=inline,hl_lines=[2, \u0026#34;6-9\u0026#34;],linenostart=19} // ... code ``` Produces:\n19func randPass(n uint8, extraChars string) (string, error) { 20\tconst base = \u0026#34;0123456789abcdefghijklmnopqrstuvwxyz-\u0026#34; 21\tletters := base + extraChars 22\tret := make([]byte, n) 23\tvar i uint8 24\tfor i = 0; i \u0026lt; n; i++ { 25\tnum, err := rand.Int(rand.Reader, big.NewInt(int64(len(letters)))) 26\tif err != nil { 27\treturn \u0026#34;\u0026#34;, err 28\t} 29\tret[i] = letters[num.Int64()] 30\t} 31 32\treturn string(ret), nil 33} Smaller code ```go {.fs90} num, err := rand.Int(rand.Reader, big.NewInt(int64(len(letters)))) ``` Produces:\nnum, err := rand.Int(rand.Reader, big.NewInt(int64(len(letters)))) Available classes: fs95, fs90, fs85, fs80, fs75, fs70 and fs50.\nKaTeX Inline \\(\\pi = 3.14\\) Ï€=3.14\\pi = 3.14Ï€=3.14\nBlock $$ \\begin{align} \\sqrt{37} \u0026amp; = \\sqrt{\\frac{73^2-1}{12^2}} \\\\ \u0026amp; = \\sqrt{\\frac{73^2}{12^2}\\cdot\\frac{73^2-1}{73^2}} \\\\ \u0026amp; = \\frac{73}{12}\\sqrt{1 - \\frac{1}{73^2}} \\\\ \u0026amp; \\approx \\frac{73}{12}\\left(1 - \\frac{1}{2\\cdot73^2}\\right) \\end{align} $$ 37=732âˆ’1122=732122â‹…732âˆ’1732=73121âˆ’1732â‰ˆ7312(1âˆ’12â‹…732) \\begin{align} \\sqrt{37} \u0026amp; = \\sqrt{\\frac{73^2-1}{12^2}} \\\\ \u0026amp; = \\sqrt{\\frac{73^2}{12^2}\\cdot\\frac{73^2-1}{73^2}} \\\\ \u0026amp; = \\frac{73}{12}\\sqrt{1 - \\frac{1}{73^2}} \\\\ \u0026amp; \\approx \\frac{73}{12}\\left(1 - \\frac{1}{2\\cdot73^2}\\right) \\end{align} 37â€‹â€‹=122732âˆ’1â€‹â€‹=122732â€‹â‹…732732âˆ’1â€‹â€‹=1273â€‹1âˆ’7321â€‹â€‹â‰ˆ1273â€‹(1âˆ’2â‹…7321â€‹)â€‹â€‹Note that if you don\u0026rsquo;t want automatic numbering you can use \\begin{align*}.\nChemistry \\[ \\tag*{(2)} \\ce{Zn^2+ \u0026lt;=\u0026gt;[+ 2OH-][+ 2H+] $\\underset{\\text{amphoteric hydroxide}}{\\ce{Zn(OH)2 v}}$ \u0026lt;=\u0026gt;[+ 2OH-][+ 2H+] $\\underset{\\text{tetrahydroxozincate}}{\\ce{[Zn(OH)4]^2-}}$} \\] ZnX2+â‡Œ+2â€‰HX++2â€‰OHXâˆ’Zn(OH)X2â†“amphotericÂ hydroxideâ‡Œ+2â€‰HX++2â€‰OHXâˆ’[Zn(OH)X4]X2âˆ’tetrahydroxozincate \\ce{Zn^2+ \u0026lt;=\u0026gt;[+ 2OH-][+ 2H+] $\\underset{\\text{amphoteric hydroxide}}{\\ce{Zn(OH)2 v}}$ \u0026lt;=\u0026gt;[+ 2OH-][+ 2H+] $\\underset{\\text{tetrahydroxozincate}}{\\ce{[Zn(OH)4]^2-}}$} ZnX2++2OHXâˆ’+2HX+â€‹amphotericÂ hydroxideZn(OH)X2â€‹â†“â€‹+2OHXâˆ’+2HX+â€‹tetrahydroxozincate[Zn(OH)X4â€‹]X2âˆ’â€‹Use supported functions and support table for reference.\nFile trees Use tree.nathanfriend.io to make beautiful file tree structures like this one:\n. â”œâ”€â”€ tmp/ â”‚ â”œâ”€â”€ __init__.py â”‚ â””â”€â”€ temp.py â”œâ”€â”€ src/ â”‚ â”œâ”€â”€ __init__.py â”‚ â””â”€â”€ main.py â””â”€â”€ Dockerfile Images General All images are lazy-loaded. You can use the usual ![image](./image.png) to insert images.\nInternally it uses imgp class. You can customize images like this:\n\u0026lt;p class=\u0026#34;imgp\u0026#34;\u0026gt; \u0026lt;img style=\u0026#34;max-height: 50vh; border: 6px solid var(--complimentary);\u0026#34; src=\u0026#34;./pinkrose.avif\u0026#34; /\u0026gt; \u0026lt;/p\u0026gt; Figure element {{\u0026lt; figure src=\u0026#34;./pinkrose.avif\u0026#34; title=\u0026#34;An elephant at sunset\u0026#34; \u0026gt;}} As with images, you can customize figure:\n\u0026lt;figure\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; style=\u0026#34;max-height: 50vh;\u0026#34; src=\u0026#34;./pinkrose.avif\u0026#34; /\u0026gt; \u0026lt;figcaption\u0026gt;Pink rose\u0026lt;/figcaption\u0026gt; \u0026lt;/figure\u0026gt; Pink rose Plots To make the charts look good use this context manager:\nimport matplotlib.pyplot as plt import matplotlib as mpl import numpy as np import seaborn as sns class Blog: def __init__(self, filename, figsize=(6, 6), axis=True): self.filename = filename self.figsize = figsize self.axis = axis def set_plot(self, figsize=(6, 6)): sns.set() sns.set_theme(style=\u0026#34;white\u0026#34;, palette=\u0026#34;bright\u0026#34;) COLOR = \u0026#34;grey\u0026#34; mpl.rcParams[\u0026#34;text.color\u0026#34;] = COLOR mpl.rcParams[\u0026#34;axes.labelcolor\u0026#34;] = COLOR mpl.rcParams[\u0026#34;xtick.color\u0026#34;] = COLOR mpl.rcParams[\u0026#34;ytick.color\u0026#34;] = COLOR plt.figure(figsize=self.figsize) sns.set_context(\u0026#34;paper\u0026#34;) def save_plot(self): if self.axis: plt.axis(\u0026#34;on\u0026#34;) else: plt.axis(\u0026#34;off\u0026#34;) plt.savefig(self.filename, format=\u0026#34;svg\u0026#34;, bbox_inches=\u0026#34;tight\u0026#34;, pad_inches=0.3, transparent=True) def __enter__(self): self.set_plot() return self def __exit__(self, exc_type, exc_value, exc_traceback): self.save_plot() Then you can use it like this\nx = np.arange(0, 10, 0.00001) y = x * np.sin(2 * np.pi * x) fmri = sns.load_dataset(\u0026#34;fmri\u0026#34;) with Blog(\u0026#34;fmri.svg\u0026#34;, figsize=(7, 7), axis=True): sns.lineplot(x=\u0026#34;timepoint\u0026#34;, y=\u0026#34;signal\u0026#34;, hue=\u0026#34;region\u0026#34;, style=\u0026#34;event\u0026#34;, data=fmri) Looks good in light and dark mode!\nImage galleries You can create image galleries with this:\n\u0026lt;ul class=\u0026#34;image-gallery\u0026#34;\u0026gt; \u0026lt;li\u0026gt;\u0026lt;figure\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; src=\u0026#34;./pinkrose.avif\u0026#34; /\u0026gt; \u0026lt;figcaption\u0026gt;Pink rose\u0026lt;/figcaption\u0026gt; \u0026lt;/figure\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;figure\u0026gt; \u0026lt;img loading=\u0026#34;lazy\u0026#34; src=\u0026#34;./flower.avif\u0026#34; /\u0026gt; \u0026lt;figcaption\u0026gt;Pink rose\u0026lt;/figcaption\u0026gt; \u0026lt;/figure\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; Pink rose Not a rose If you want three images in a row additionally add three-image-gallery class to ul.\nTwo images {{\u0026lt; twoimg \u0026#34;./pinkrose.avif\u0026#34; \u0026#34;./flower.avif\u0026#34; \u0026gt;}} Three images {{\u0026lt; threeimg \u0026#34;./pinkrose.avif\u0026#34; \u0026#34;./flower.avif\u0026#34; \u0026#34;./pinkrose.avif\u0026#34; \u0026gt;}} YouTube {{\u0026lt; youtube x6Ssz1WiKN8 \u0026gt;}} Attachments {{\u0026lt; attachments folder=\u0026#34;temp\u0026#34; title=\u0026#34;Boom\u0026#34; caption=\u0026#34;example\u0026#34; \u0026gt;}} title and caption can be omitted.\nBoom (example) temp.py ðŸ”— \u0026nbsp; (783b) Columns {{ % columns %}} #### Title 1 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\u0026#39;s standard dummy text ever since the 1500s. \u0026lt;---\u0026gt; #### Title 2 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\u0026#39;s standard dummy text ever since the 1500s {{ % /columns %}} Title 1 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\u0026rsquo;s standard dummy text ever since the 1500s.\nTitle 2 Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\u0026rsquo;s standard dummy text ever since the 1500s\nColumns with other elements An elephant at sunset An elephant at sunset Tabs {{\u0026lt; tabs \u0026gt;}} {{\u0026lt; tab \u0026#34;MacOS\u0026#34; \u0026gt;}} This is tab **MacOS** content. Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! {{\u0026lt; /tab \u0026gt;}} {{\u0026lt; tab \u0026#34;Linux\u0026#34; \u0026gt;}} This is tab **Linux** content. {{\u0026lt; /tab \u0026gt;}} {{\u0026lt; tab \u0026#34;Windows\u0026#34; \u0026gt;}} This is tab **Windows** content. Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! {{\u0026lt; /tab \u0026gt;}} {{\u0026lt; /tabs \u0026gt;}} MacOS This is tab MacOS content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter!\nLinux This is tab Linux content. Windows This is tab Windows content.\nLorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter!\nThis is unnamed footnote.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n", 
        "url": "http:\/\/localhost:1313\/post\/hugo-dead-simple\/"
    },
    
    "http:\/\/localhost:1313\/categories\/": {
        "title": "Categories",
        "tags": [],
        "content": "", 
        "url": "http:\/\/localhost:1313\/categories\/"
    },
    
    "http:\/\/localhost:1313\/tags\/rust\/": {
        "title": "Rust",
        "tags": [],
        "content": "", 
        "url": "http:\/\/localhost:1313\/tags\/rust\/"
    },
    
}
</script>


    <script defer src="/js/lunr.js"></script>
    <script defer src="/js/search.js"></script>


</footer>

</body>
</html>

